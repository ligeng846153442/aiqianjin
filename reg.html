<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" href="css/base.css" type="text/css">
		<link rel="stylesheet" href="css/reg.css" type="text/css">
		<link rel="stylesheet" href="css/reglogin.css" type="text/css">
		
	</head>
	<body>
		<div id="" class="header">
			<div id="" class="header1 w">
				<div id="" class="logo l">
					<a href="#">
						<h1 id="">
						
						</h1>
					</a>
				</div>
				<span style="position: absolute;left: 130px;top: 3px;color:#74859c;">|</span>
				<div class="header_left l">
					<a href="#"><span></span>手机爱钱进</a>
				</div>
				<div class="header_right2 r">
					<a href="#"><span></span>在线客服</a>
				</div>
				<div class="header_right1 r">
					<p><span></span>400-812-8808(9:00-21:00)</p>
				</div>
			</div>
		</div>
		
		<div id="" class="nav">
			<div id="" class="nav1 w">
				<h3>用户注册</h3>
			</div>
		</div>
		
		<div id="" class="main">
			<div id="" class="main1 w">
				<div id="" class="mian1r r">
					<div id="" class="main1rr" style="width: 1050px;height: 90px;">
						<div id="" class="main1rt r">
							已有账号？<a href="#" style="color: #f60;">立即登录</a>
						</div>
					</div>
					<form action="" method="post">
						<div id="" class="main1rc1">
							<input class="inputphone l" type="text" name="userPhone" id="phoneId" placeholder="请输入您的常用手机号码" />
							<span id="" class="span1"></span>
							<span id="spanphone" class="" style="width: 240px;height: 40px;line-height: 40px;color: #f60;position: absolute;left: 402px;top: 0px;"></span>
						</div>
						<div id="" class="main1rc2">
							<input class="inputpassword l" type="password" name="userPass" id="passId" placeholder="请输入密码" />
							<span id="" class="span2"></span>
							<span id="spanpass" class="" style="width: 340px;height: 40px;line-height: 40px;position: absolute;left:402px;top: 0px;"></span>
							<div id="mimastrong" style="opacity:0;position: absolute; width:300px;height: 40px;line-height: 40px;right: 10px;top: 0px;">
								密码强度<span id="weak" style="position:absolute;left:70px;top:13px;border-radius:4px;width: 40px;height: 15px;margin-left: 5px;"></span>
										<span id="normal" style="position:absolute;left:110px;top:13px;border-radius:4px;width: 40px;height: 15px;margin-left: 5px;"></span>
										<span id="strong" style="position:absolute;left:150px;top:13px;border-radius:4px;width: 40px;height: 15px;;margin-left: 5px;"></span>
										<span id="tishi" style="position:absolute;left:200px;top:13px;border-radius:4px;width: 15px;height: 15px;margin-left: 5px;"></sapn>
							</div>
							
						</div>
						<div id="" class="main1rc3">
							<input type="text" placeholder="请输入验证码" class="l"/>
							<span id="" class="span3 l"><a href="#" style="color: #fff;">获取短信验证码</a></span>
						</div>
						<div id="" class="main1rc4">
							<span class="clickspan"></span>
							<p class="yaoqingma" style="">我有邀请码，<span style="color: #f60;">添加邀请码</span>帮助好友赚取利益</p>
	
						</div>
						<div id="" class="main1rc4-1">
							<input type="text" class="yaoqingkuang" placeholder="请输入邀请码" />
						</div>
						<span id="" class="main1rc5">
							<input type="checkbox" name="" id="" value="" />我已阅读并同意<a href="#">《爱钱进注册协议》</a>、<a href="#">《CFCA数字证书服务协议》</a>
						</span>
						
						<input type="submit" value="立即注册"/ class="main1rc6">
						
						
					</form>
					
					<div id="" class="main1rc7">
						<span id="" class="">
							
						</span>
						<p style="display: block;margin-left: 20px;">您的信息已使用SSL加密技术，数据传输安全</p>
					</div>
				</div>
			</div>
		</div>
		
		<div id="" class="footer">
			<div id="" class="footer1 w">
				<p style="color: #707e8c;">©2018 iqianjin.com.All Rights Reserved <a href="#">京ICP备14017729  出借有风险，出借需谨慎</a></p>
			</div>
		</div>
	</body>
</html>
<script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="js/regExpTools.js"></script>
<script type="text/javascript">
	window.onload = function(){
		function SC(str){
			if(str.charAt(0)=="#"){
				return document.getElementById(str.substring(1));
			}else if(str.charAt(0)=="."){
				return document.getElementsByClassName(str.substring(1));
			}else{
				return document.getElementsByTagName(str);
			}
		}
		
		//ajax注册
//		document.getElementById("phoneId").onblur = function(){
//			
//		}
		
				
		
		/*----手机号文本框聚焦显示提示----*/
		document.getElementById("phoneId").onfocus = function(){
			document.getElementById("spanphone").style.color = "#aaa";
			document.getElementById("spanphone").innerHTML = "请输入您的手机号";
		}
		/*----手机号文本框失焦显示提示----*/
		document.getElementById("phoneId").onblur = function(){
			//1、创建对象
			let xhr = new XMLHttpRequest();
			//2、设置请求参数
			xhr.open("get","regsave.php"+this.value,true);
			
			//3、设置回调函数
			xhr.onreadystatechange = function(){
				if(xhr.readyState==4 && xhr.status==200){
					//5、接收响应
					let str = xhr.responseText;
					if(str=="1"){
						document.getElementById("spanphone").innerHTML = "恭喜您，该用户名没有人用，赶紧注册吧";
					}else{
						document.getElementById("spanphone").innerHTML = "亲，不好意思，用户名被别人用了，请重新思考";
					}
					
				}
			}
			
			//4、发送请求
			xhr.send();
			
			document.getElementById("passId").style.outline = "1px solid #f60";
			
			if(this.value==""){
				document.getElementById("passId").style.outline = "none";
				document.getElementById("spanphone").style.color = "#f60";
				document.getElementById("spanphone").innerHTML = "手机号不能为空";
			}else if(this.value!=null){
				var str = this.value;
				var tel = checkAll("Phone",str);
				if(tel==true){
					document.getElementById("spanphone").style.color = "#19bd9b";
					document.getElementById("spanphone").style.fontSize = "20px";
					document.getElementById("spanphone").innerHTML = "√";
				}else{
					document.getElementById("spanphone").style.color = "#f60";
					document.getElementById("spanphone").innerHTML = "手机号码格式不正确，请重新输入！！";
				}
			}
		}
		
		
		/*----密码强度+密码提示----*/
		/*----聚焦----*/
		document.getElementById("passId").onfocus = function(){
			document.getElementById("passId").style.outline = "1px solid #90c1f5";
			let str1 = this.value;
			
			if(str1.length>0){
				document.getElementById("mimastrong").style.opacity = "0";
			}
			
			document.getElementById("spanpass").style.fontSize = "14px";
			document.getElementById("spanpass").style.color = "#aaa";
			document.getElementById("spanpass").innerHTML = "请输入6-20位字符，建议使用字母，数字或符号的组合";

				document.getElementById("passId").onkeyup = function(){
					document.getElementById("mimastrong").style.opacity = "1";
					
					var pass = this.value;
					if(pass.length >= 6 || pass.length <= 20){
						
						//1、分别查看字符串里是否有，数字，字母，特殊字符
						//1）、数字
						var hasNum = false;
						var regNum = /\d/;
						if(regNum.test(pass)){
							hasNum = true;
						}
						//2）、字母
						var hasLetter = false;
						var regLetter = /[a-zA-Z]/;
						if(regLetter.test(pass)){
							hasLetter = true;
						}
						//3）、特殊字符
						var hasSpecial = false;
						var regSpecial = /[@!#\$%]/;
						if(regSpecial.test(pass)){
							hasSpecial = true;
						}
					
						let level = hasNum+hasLetter+hasSpecial;
						if(level==1){//弱：纯数字，纯字母，纯特殊字
							document.getElementById("weak").style.backgroundColor = "#f60";
							document.getElementById("normal").style.backgroundColor = "#ccc";
							document.getElementById("strong").style.backgroundColor = "#ccc";
							document.getElementById("tishi").innerHTML = "弱";
						}else if(level==2){//中：两个的组合
							document.getElementById("normal").style.backgroundColor = "#19BD9B";
							document.getElementById("weak").style.backgroundColor = "#19BD9B";
							document.getElementById("strong").style.backgroundColor = "#ccc";
							document.getElementById("tishi").innerHTML = "中";
						}else if(level==3){//强：三个组合
							document.getElementById("strong").style.backgroundColor = "#19BD9B";
							document.getElementById("weak").style.backgroundColor = "#19BD9B";
							document.getElementById("normal").style.backgroundColor = "#19BD9B";
							document.getElementById("tishi").innerHTML = "强";
						}
					}else if(regLetter.test(str) || regNum.test(str) || regSpecial.test(str)){
						document.getElementById("spanpass").style.color = "#19bd9b";
						document.getElementById("spanpass").style.fontSize = "20px";
						document.getElementById("spanpass").innerHTML = "√";
					}
				}
		}	
		/*----失焦----*/
		document.getElementById("passId").onblur = function(){
			document.getElementById("mimastrong").style.opacity = "0";
			if(this.value==""){
				document.getElementById("spanpass").style.color = "#f60";
				document.getElementById("spanpass").innerHTML = "密码不能为空";
				document.getElementById("spanpass").style.fontSize = "14px";
				document.getElementById("passId").style.outline = "1px solid #f60";
				
			}else if(this.value!=null){
				var regLetter = /[a-zA-Z]/;
				var regNum = /[0-9]/;
				var regSpecial = /[\!#@_]/;
				var str = this.value;
				if(str.length < 6 || str.length > 20){
					document.getElementById("spanpass").style.color = "#f60";
					document.getElementById("spanpass").innerHTML = "密码长度只能在6-20位字符之间！！";
				}else if(regLetter.test(str) || regNum.test(str) || regSpecial.test(str)){
					document.getElementById("spanpass").style.color = "#19bd9b";
					document.getElementById("spanpass").style.fontSize = "20px";
					document.getElementById("spanpass").innerHTML = "√";

				}
			}
		}
		
		
		
//		$(".inputphone").focus(function(){
//			$(".spanphone").css("display","block");
//		});
//		$(".inputphone").blur(function(){
//			$(".spanphone").css("display","none");
//		});
//		$(".inputpassword").focus(function(){
//			$(".spanpassword").css("display","block");
//		});
//		$(".inputpassword").blur(function(){
//			$(".spanpassword").css("display","none");
//		});
		
//		document.getElementsByClassName("inputphone").onclick = function(){
//			document.getElementsByClassName("spanphone").css.style.display = "block";
//		};
//		document.getElementsByClassName("inputphone").onblur = function(){
//			document.getElementsByClassName("spanphone").css.style.display = "none";
//		};
		
		
		
		
		
		
		/*----点击三角和文本显示和隐藏文本框----*/
		$(".main1rc4").click(function(){
			if($(".main1rc4-1").css("height")=="0px"){
				$(".main1rc4-1").animate({
						height:60
				},800);
				$(".yaoqingkuang").animate({
						height:40
				},800);
				
				$(".clickspan").css({"border-right":"5px solid #fff","border-top":"5px solid #000","border-left":"5px solid #fff"});
				
			}else if($(".main1rc4-1").css("height")!="0px"){
				$(".main1rc4-1").animate({
						height:0
				},800);
				$(".yaoqingkuang").animate({
						height:0
				},800);
				
				$(".clickspan").css({"border-bottom":"5px solid #fff","border-top":"5px solid #fff","border-left":"5px solid #000"});
				
			}	
		});
				
//			function(){
//				$(".span1").css({"border-right":"5px solid #fff","border-top":"5px solid #000","border-left":"5px solid #fff"});
//				
//			}
	}
</script>